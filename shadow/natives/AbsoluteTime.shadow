import shadow:io@Console;

/**
* @author Claude Abounegm
*/
locked class shadow:natives@
	AbsoluteTime
{
	private native readonly setAbsoluteTime(Pointer time, int sec, int nsec) => ();
	private native readonly get handleSize() => (int);
	
	get Pointer ptr;
	
	public create(TimeSpan ts)
	{
		ptr = Pointer:create(this->handleSize);

		var absTime = ts + Time->epochNow;
		setAbsoluteTime(ptr, cast<int>(absTime->totalSeconds), absTime->nanoSeconds);
	}
	
	public free() => ()
	{
		ptr.free();
	}
}