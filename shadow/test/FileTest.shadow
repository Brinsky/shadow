import shadow:io;

class shadow:test@FileTest
{
	public main( String[] args ) => ()
	{	
		if( args->size == 0 ) {
			throw Exception:create("No file specified!");
		}

		try {
		
			var mess1 = MutableString:create();
			var mess2 = MutableString:create();
			var mess3 = MutableString:create();
			
		
			File file = File:create(args[0]);
			Console.printLine("Create done!");
			
		
			try {	
				file->exists = true;
			} catch ( IOException ex ) {
				Console.printLine("Exception!");
				Console.printLine("catch ( " # ex # " )");
			}
			
			Console.printLine("Made file exist!");

			readonly byte[] chars = "Hello World!"->chars;
			file.write(chars);
			Console.printLine("Wrote!");
			file->size = file->position;
			file.close();
			
			byte[] buffer = byte:create[chars->size];
			file.read(buffer);
			Console.printLine(String:create(buffer));
			file.close();
			
			file->exists = false;
			
		} catch ( IOException ex ) {
			Console.printLine(ex);
		}
	}
}
