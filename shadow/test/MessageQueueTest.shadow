import shadow:io@Console;
import shadow:utility;

class shadow:test@MessageQueueTest
{
	public main(String[] args) => ()
	{
		var queue = MessageQueue:create(2, 10);
		
		while(!queue->isFull) {
			queue.enqueue(Message:create(queue->size));
		}
		
		try {
			queue.enqueue(Message:create("wrong"));
		} catch(FullListException e) {
			Console.printLine("FullListException");
		}
		
		int total = 0;
		while(!queue->isEmpty) {
			queue.dequeue(int:class);
			total += 1;
		}
		Console.printLine(total);
	}
}